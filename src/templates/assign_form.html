{% extends "base.html" %}

{% block title %} Assignments {% endblock %}

{% block content %}
<form method="post" action="{{ url_for('form_input') }}">
  <div class="form-group row">
    <label for="assign_name" class="col-sm-2 col-form-label">Assignment Name:</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" id="assign_name">
    </div>
  </div>
  <div class="form-group row">
    <label for="est_time" class="col-sm-2 col-form-label">Estimated Time to Finish (hrs):</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" id="est_time">
    </div>
  </div>
  <div class="form-group row">
    <label for="percentage" class="col-sm-2 col-form-label">Percentage of Assignment:</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" id="percentage">
    </div>
  </div>
  <div class="form-group row">
    <label for="notes" class="col-sm-2 col-form-label">Notes: </label>
    <div class="col-sm-10">
      <textarea id="notes" name="notes" rows="4" cols="50">
          </textarea>
    </div>
  </div>

  <button type="submit" class="btn btn-primary">Add Assignment</button>
</form>

<script>
  let assignments = [];
  // example {name:'Assignment 1', worth: 20%, time: 3 hrs, notes: 'misc. notes'}
  const addAssignment = (ev)=>{
      ev.preventDefault();  //to stop the form submitting
      
      //assignment object
      let assignment = {
          name: document.getElementById('assign_name').value,
          worth: document.getElementById('percentage').value,
          time: document.getElementById('est_time').value,
          notes: document.getElementById('notes').value
      }
      assignments.push(assignment);
      document.forms[0].reset(); // to clear the form for the next entries
      //document.querySelector('form').reset();

      //for display purposes only
      console.warn('added' , {assignments} );
      let pre = document.querySelector('#msg pre');
      pre.textContent = '\n' + JSON.stringify(assignments, '\t', 2);

      //saving to localStorage
      //localStorage.setItem('MyAssignmentList', JSON.stringify(assignments) );
      // HOW TO GET THIS TO THE BACKEND
  }
  document.addEventListener('DOMContentLoaded', ()=>{
      document.getElementById('btn').addEventListener('click', addAssignment);
  });
</script>
{% endblock %}